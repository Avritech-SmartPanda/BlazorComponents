@page "/tree"
@using System.IO
@using Microsoft.EntityFrameworkCore
@using Property365.Web.Components.Demos.Models.Northwind
@inject Property365.Web.Components.Demos.Data.NorthwindContext Northwind
@inject Microsoft.AspNetCore.Hosting.IWebHostEnvironment HostEnvironment

<Property365ComponentContainer Name="Tree">
    <Property365Card Class="my-5 mx-auto" style="max-width: 400px;">
        <h4>Inline definition</h4>
        <Property365Tree Expand=@OnExpand Change=@OnChange Style="width: 100%; height: 300px">
            <Property365TreeItem Text="BMW">
                <ChildContent>
                    <Property365TreeItem Text="M3" />
                    <Property365TreeItem Text="M5" />
                </ChildContent>
                <Template>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/4/44/BMW.svg" style="width: 20px; margin-right: 8px;" />
                    <b>@context.Text</b>
                </Template>
            </Property365TreeItem>
            <Property365TreeItem Text="Audi">
                <ChildContent>
                    <Property365TreeItem Text="RS4" />
                    <Property365TreeItem Text="RS6" />
                </ChildContent>
                <Template>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/9/92/Audi-Logo_2016.svg" style="width: 20px; margin-right: 8px;" />
                    <b>@context.Text</b>
                </Template>
            </Property365TreeItem>
            <Property365TreeItem Text="Mercedes">
                <Template>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/9/90/Mercedes-Logo.svg" style="width: 20px; margin-right: 8px;" />
                    <b>@context.Text</b>
                </Template>
                <ChildContent>
                    <Property365TreeItem Text="C63 AMG" />
                    <Property365TreeItem Text="S63 AMG" />
                </ChildContent>
            </Property365TreeItem>
        </Property365Tree>
    </Property365Card>
</Property365ComponentContainer>

<EventConsole @ref=@console Class="mt-4" />

@code {
    EventConsole console;

    void Log(string eventName, string value)
    {
        console.Log($"{eventName}: {value}");
    }

    void OnChange(TreeEventArgs args)
    {
        Log("Change", $"Item Text: {args.Text}");
    }

    void OnExpand(TreeExpandEventArgs args)
    {
        if (args.Value is string text)
        {
            Log("Expand", $"Text: {text}");
        }
    }
}